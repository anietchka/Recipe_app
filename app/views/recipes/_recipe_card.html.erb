<%= link_to recipe_path(recipe), class: "recipe-card" do %>
  <div class="recipe-card__image-wrapper">
    <% if recipe.image_url.present? %>
      <%= image_tag recipe.image_url, alt: recipe.title, class: "recipe-card__image", onerror: "this.onerror=null; this.src='#{image_path('dan-gold-5O1ddenSM4g-unsplash.jpg')}';" %>
    <% else %>
      <%= image_tag "dan-gold-5O1ddenSM4g-unsplash.jpg", alt: recipe.title, class: "recipe-card__image" %>
    <% end %>
  </div>

  <div class="recipe-card__content">
    <div class="recipe-card__title-row">
      <h2 class="recipe-card__title"><%= recipe.title %></h2>

      <% if recipe.ratings.present? %>
        <span class="recipe-card__rating">
          ‚≠ê <%= number_with_precision(recipe.ratings, precision: 1) %>
        </span>
      <% end %>
    </div>

    <div class="recipe-card__score">
      <%= t("recipes.index.ingredients_score", matched: recipe.matched_ingredients, total: recipe.total_ingredients_count, missing: recipe.missing_count) %>
    </div>

    <div class="recipe-card__progress">
      <div class="recipe-card__progress-bar">
        <div
          class="recipe-card__progress-fill"
          style="width: <%= recipe.completion_percentage %>%"
        ></div>
      </div>

      <span class="recipe-card__status <%= recipe.status_class %>">
        <%= recipe.status_text %>
      </span>
    </div>
  </div>
<% end %>
